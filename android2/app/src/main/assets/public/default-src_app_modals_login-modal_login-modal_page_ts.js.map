{"version":3,"file":"default-src_app_modals_login-modal_login-modal_page_ts.js","mappings":"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","sources":["./src/app/modals/login-modal/login-modal.page.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { AlertController, LoadingController, ModalController, NavParams } from '@ionic/angular';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { DolphinService } from 'src/app/services/dolphin.service';\n\n@Component({\n  selector: 'app-login-modal',\n  templateUrl: './login-modal.page.html',\n  styleUrls: ['./login-modal.page.scss'],\n})\nexport class LoginModalPage implements OnInit {\n  modalTitle: string;\n  modelId: number;\n  credentials: FormGroup;\n  isOTP: boolean = false;\n  isEmail: boolean = false;\n  isLogin: boolean = true;\n  OTPRemote:any;\n  OTPInput:any;\n  frmRegisterEmail: FormGroup;\n  EmailOutletInput: string = '';\n  EmailInput: string = '';\n  EmailOTPInput: string = '';\n  constructor(\n    private fb: FormBuilder,\n    private modalController: ModalController,\n    private navParams: NavParams,\n    private dolphinService: DolphinService,\n    private loadingController: LoadingController,\n    private alertController: AlertController\n  ) { }\n\n  ngOnInit() {\n    console.table(this.navParams);\n    this.modelId = this.navParams.data.paramID;\n    this.modalTitle = this.navParams.data.paramTitle;\n    this.credentials = this.fb.group({\n      user_email: ['', [\n        Validators.required\n      ]],\n      password: ['', [\n        Validators.required, \n        Validators.minLength(8)\n      ]]\n    });\n\n    this.frmRegisterEmail = this.fb.group({\n      frmEmailOutletId: ['', [\n        Validators.required,\n        Validators.minLength(18)\n      ]],\n      frmEmailAddress: ['', [\n        Validators.required\n      ]]\n    });\n  }\n\n  get user_email() {\n    return this.credentials.get('user_email');\n  }\n\n  get password() {\n    return this.credentials.get('password');\n  }\n\n  get frmEmailOutletId() {\n    return this.credentials.get('frmEmailOutletId');\n  }\n\n  get frmEmailAddress() {\n    return this.credentials.get('frmEmailAddress');\n  }\n\n  async closeModal() {\n    await this.modalController.dismiss();\n  }\n\n  openEmail() {\n    this.isEmail = true;\n    this.isOTP = false;\n    this.isLogin = false;\n  }\n\n  closeEmail() {\n    this.isEmail = false;\n    this.isOTP = false;\n    this.isLogin = true;\n  }\n\n  async checkOutlet() {\n    const loading = await this.loadingController.create({\n      message: 'Pengecekan..',\n      backdropDismiss: false\n    });\n    await loading.present();\n\n    this.dolphinService.getOTPEmail(this.credentials.value).subscribe(data => {\n      console.log('data.otp', data)\n      this.loadingController.dismiss();\n      if(data.status == 'success') {\n       \n        console.log('data.otp', data)\n       // this.OTPRemote = 12345 //- MIRROR\n        this.OTPRemote = data.otp;\n        this.isEmail = false;\n        this.isOTP = true;\n        this.isLogin = false;\n      } else {\n        this.showAlert('Opps..', data.err)\n      }\n    })\n  }\n\n  async submitConfirmLogin() {\n    if(this.OTPInput == this.OTPRemote) {\n      \n      const onClosedData: string = this.credentials.value;\n      await this.modalController.dismiss(onClosedData);\n    } else {\n      this.showAlert('Opps..', 'Kode OTP yang Anda input salah..');\n    }\n  }\n\n  async showAlert(title,msg) {\n    const alert = await this.alertController.create({\n      header: title,\n      message: msg,\n      buttons: [\n        {\n          text: 'Ok'\n        }]\n    });\n    await alert.present()\n  }\n\n  async simpanEmail() {\n    if(this.EmailOTPInput == this.OTPRemote) {\n      const loading = await this.loadingController.create({\n        message: 'Menyimpan alamat email..',\n        backdropDismiss: false\n      });\n      await loading.present();\n      this.dolphinService.getChangeEmail(this.frmRegisterEmail.value).subscribe(data => {\n        this.loadingController.dismiss();\n        if(data.status == 'success') {\n          this.showAlert('Update Email', 'Email telah didaftarkan, silahkan login.')\n          \n          this.isEmail = false;\n          this.isOTP = false;\n          this.isLogin = true;\n        } else {\n          this.showAlert('Opps..', data.message)\n        }\n      })\n    } else {\n      this.showAlert('Opps..', 'kode OTP tidak sesuai')\n    }\n  }\n\n  setupotp(){\n    this.dolphinService.setupotp().subscribe(data => {\n      console.log(data.status_sms)\n        if(data.status_sms==1){\n          this.kirimOTPEmail();  \n        } else {\n          this.kirimOTPEmail_wa();\n        }\n    });\n  }\n\n  async kirimOTPEmail() {\n    const alert = await this.alertController.create({\n      header: 'Kirimkan OTP',\n    //  message: 'Kirim',\n      buttons: [\n        {\n          text: 'Whatsapp',\n          role: 'confirm',\n          handler: () => {\n            this.dolphinService.getOTPChangeEmail(this.frmRegisterEmail.value,'wa').subscribe(data => {\n              this.loadingController.dismiss();\n              if(data.status == 'success') {\n                this.showAlert('OTP Terkirim', 'Kami telah mengirimkan kode OTP ke Whatsapp Anda, isi kode yang Anda terima pada form ini.')\n                this.OTPRemote = data.otp\n                this.isEmail = true;\n                this.isOTP = false;\n                this.isLogin = false;\n              } else {\n                this.showAlert('Opps..', data.message)\n              }\n            })\n          },\n        },\n        {\n          text: 'SMS',\n          role: 'confirm',\n          handler: () => {\n            this.dolphinService.getOTPChangeEmail(this.frmRegisterEmail.value,'sms').subscribe(data => {\n              this.loadingController.dismiss();\n              if(data.status == 'success') {\n                this.showAlert('OTP Terkirim', 'Kami telah mengirimkan kode OTP ke HP Anda, isi kode yang Anda terima pada form ini.')\n                this.OTPRemote = data.otp\n                this.isEmail = true;\n                this.isOTP = false;\n                this.isLogin = false;\n              } else {\n                this.showAlert('Opps..', data.message)\n              }\n            })\n          },\n        },\n      ],\n    });\n    await alert.present();\n   \n\n}\n\n  async kirimOTPEmail_wa() {\n    \n      const loading = await this.loadingController.create({\n        message: 'Pengecekan akun..',\n        backdropDismiss: false\n      });\n      await loading.present();\n\n      this.dolphinService.getOTPChangeEmail(this.frmRegisterEmail.value,'wa').subscribe(data => {\n        this.loadingController.dismiss();\n        if(data.status == 'success') {\n          this.showAlert('OTP Terkirim', 'Kami telah mengirimkan kode OTP ke Whatsapp Anda, isi kode yang Anda terima pada form ini.')\n          this.OTPRemote = data.otp\n          this.isEmail = true;\n          this.isOTP = false;\n          this.isLogin = false;\n        } else {\n          this.showAlert('Opps..', data.message)\n        }\n      })\n\n  }\n\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}