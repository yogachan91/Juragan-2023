{"version":3,"file":"src_app_reset-pass_reset-pass_module_ts.js","mappings":"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","sources":["./src/app/reset-pass/reset-pass-routing.module.ts","./src/app/reset-pass/reset-pass.module.ts","./src/app/reset-pass/reset-pass.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ResetPassPage } from './reset-pass.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ResetPassPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ResetPassPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ResetPassPageRoutingModule } from './reset-pass-routing.module';\n\nimport { ResetPassPage } from './reset-pass.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ResetPassPageRoutingModule\n  ],\n  declarations: [ResetPassPage]\n})\nexport class ResetPassPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { AlertController, NavController } from '@ionic/angular';\nimport { DolphinService } from '../services/dolphin.service';\nimport { AuthenticationService } from '../services/authentication.service';\nimport { NavigationExtras,Router } from '@angular/router';\n\n\n@Component({\n  selector: 'app-reset-pass',\n  templateUrl: './reset-pass.page.html',\n  styleUrls: ['./reset-pass.page.scss'],\n})\nexport class ResetPassPage implements OnInit {\n  profile:any;\n  phonenumber:any;\n  OTP:any;\n  constructor(\n    private dolphinService: DolphinService,\n    private alertController: AlertController,\n    private navController: NavController,\n    private authService: AuthenticationService,\n    private router: Router,\n  ) { }\n\n  ngOnInit() {\n    this.dolphinService.getdetailprofile().subscribe(data => {\n         \n     this.profile = data[0]\n      console.log('PROFIL', this.profile)\n     this.phonenumber = this.profile.no_hp;\n   });\n   }\n\n   async showalerts(title, msg) {\n    const alert = await this.alertController.create({\n      header: title,\n      message: msg,\n      buttons: [{text: 'Ok'}]\n    });\n    await alert.present()\n  }\n\n   resetpasswords(){\n    this.dolphinService.setupotp().subscribe(data => {\n      console.log(data.status_sms)\n        if(data.status_sms==1){\n           this.kirimsms();  \n        } else {\n           this.kirimwa();\n        }\n    });\n  }\n\n\n  async kirimsms() {\n   \n    let phoneNum = this.phonenumber.replace(/\\s/g,'').trim();\n    if (phoneNum.charAt(0) == '0') {\n      phoneNum = phoneNum.replace('0', '62');\n    }\n    const alert = await this.alertController.create({\n      header: 'Perhatian',\n      message: 'Untuk melanjutkan, <br>kami akan mengirimkan OTP ke nomor '+ this.phonenumber,\n      buttons: [\n        {\n          text: 'Whatsapp',\n          role: 'confirm',\n          handler: () => {\n            this.dolphinService.sendotp(phoneNum,'wa').subscribe(data => {\n              this.OTP = data.otp\n              console.log('cekotp',data)\n              this.verifyOTP(data.otp,'wa')\n              this.dolphinService.logs_auth('wa','Perubahan_pass').subscribe(data => {});\n            });\n          },\n        },\n        {\n          text: 'SMS',\n          role: 'confirm',\n          handler: () => {\n            this.dolphinService.sendotp(phoneNum,'sms').subscribe(data => {\n              this.OTP = data.otp\n              console.log('cekotp',data)\n              this.verifyOTP(data.otp,'sms')\n              this.dolphinService.logs_auth('sms','Perubahan_pass').subscribe(data => {});\n            });\n          },\n        },\n      ],\n    });\n    await alert.present();\n  }\n\n  async kirimwa() {\n   \n    let phoneNum = this.phonenumber.replace(/\\s/g,'').trim();\n    if (phoneNum.charAt(0) == '0') {\n      phoneNum = phoneNum.replace('0', '62');\n    }\n    const alert = await this.alertController.create({\n      header: 'Perhatian',\n      message: 'Untuk melanjutkan, <br>kami akan mengirimkan OTP ke nomor '+ phoneNum,\n      buttons: [\n        {\n          text: 'Tidak',\n          handler: () => {\n            // console.log('Tidak')\n          }\n        },\n        {\n          text: 'Ya, Kirimkan sekarang',\n          handler: () => {\n            this.dolphinService.sendotp(phoneNum,'sms').subscribe(data => {\n              this.OTP = data.otp\n              console.log('cekotp',data)\n              this.verifyOTP(data.otp,'sms')\n            });\n            // this.verifyOTP(12345)\n          }\n        },\n    ] \n     \n    });\n    await alert.present();\n  }\n\n  async verifyOTP(otp_code,tipe) {\n   let  tipeotp;\n    if(tipe==\"wa\"){\n      tipeotp = \"Whatsapp\";\n    } else {\n      tipeotp = \"SMS\";\n    }\n    const alert = await this.alertController.create({\n      header: 'Konfirmasi Kode OTP',\n      message: 'Kami telah mengirimkan '+ tipeotp +' OTP ke nomor Anda, <br>isi 5 angka dalam '+ tipeotp +' tersebut kemudian klik konfirmasi',\n      inputs: [\n              {\n                name: 'kodeotp',\n                placeholder: 'isi dengan 5 angka kode OTP..',\n                type: 'number'\n              }],\n      buttons: [\n            {\n              text: 'Konfirmasi OTP',\n              handler: (data) => {\n                if(data.kodeotp == otp_code) {\n                  this.sendEmail();\n                } else {\n                  this.showalerts('Oops..', 'Kode OTP tidak sesuai');\n                }\n              }\n            },\n      ]\n    });\n    await alert.present();\n  }\n\n\n  sendEmail() {\n    this.dolphinService.getResetPass().subscribe(data => {\n      if(data.status == 'success') {\n        this.showAlert()\n      }\n      \n    })\n  }\n\n  async showAlert() {\n    const alert = await this.alertController.create({\n      header: 'Cek Email Anda',\n      message: 'Email terkirim, silahkan cek dan ikuti langkah-langkah pada email Anda.',\n      buttons: [\n        {\n          text: 'Ok',\n          handler: () => {\n            this.navController.pop();\n            this.authService.logout();\n             // log auth\n            this.dolphinService.logs_auth('email','Perubahan_pass').subscribe(data => {});\n            this.router.navigateByUrl('/', { replaceUrl: true });\n          }\n        }]\n    });\n\n    await alert.present()\n  }\n\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}